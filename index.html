<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <title>HAL/JSON Demo Application</title>
    <!--<link rel="stylesheet" href="css/bootstrap.min.css">-->
    <link rel="stylesheet" href="css/bootstrap-united.min.css">
    <link rel="stylesheet" href="css/main.css">

    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/libs/jquery-1.10.2.min.js"></script>
    <script src="js/libs/jquery.cookie.js"></script>
    <script src="js/libs/handlebars-v1.3.0.js"></script>
    <script src="js/libs/ember-1.8.1.js"></script>
    <script src="js/libs/ember-data-1.0-beta-11.js"></script>
    <script src="js/libs/localstorage_adapter.js"></script>
    <script src="js/libs/moment.js"></script>
    <script src="js/app.js"></script>

    <script type="text/x-handlebars" data-template-name="application">

        <div class="container">
            <h1>HAL/JSON Demo Application</h1>
            <p>An amazing demo which will dazzle my family and friends (and hopefully land <a href="http://github.com/kgish" target="_blank">me</a> a job).</p>
        </div>

        <div class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    {{#link-to "index" class="navbar-brand"}}Home{{/link-to}}
                </div>

                <div class="navbar-collapse collapse">
                    <ul class="nav navbar-nav navbar-left">
                        {{#if isAuthenticated}}
                            <li>{{#link-to 'products'}}Products{{/link-to}}</li>
                            {{#if isAdmin}}
                                <li>{{#link-to 'secret'}}Users{{/link-to}}</li>
                            {{/if}}
                        {{/if}}
                        <li>{{#link-to 'help'}}Help{{/link-to}}</li>
                        <li>{{#link-to 'about'}}About{{/link-to}}</li>
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        {{#if isAuthenticated}}
                        <p class="navbar-text">{{hostname}}</p>
                            <li>{{#link-to 'users.user' currentUser.id}}
                                    <span class="glyphicon glyphicon-user"></span>
                                    {{currentUser.name}} ({{#if isAdmin}} admin {{else}} user {{/if}})
                                {{/link-to}}</li>
                            <li><a href="#" {{action 'logout'}}>Logout</a></li>
                        {{else}}
                            <li>{{#link-to 'users.signup'}}Sign up{{/link-to}}</li>
                            <li>{{#link-to 'sessions.index'}}Login{{/link-to}}</li>
                        {{/if}}
                    </ul>
                </div><!--/.nav-collapse -->
            </div>
        </div>

        <div id="content" class="container">
            <div class="row">
                <div class="col-md-10">
                    {{outlet}}
                </div>
            </div>
        </div>

        <div class="navbar navbar-fixed-bottom">
            <div class="container">
                <ul class="nav navbar-nav navbar-left">
                    <li class="text-muted"><span>Brought to you by <a href="mailto:kiffin.gish@planet.nl">Kiffin</a></span></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="http://github.com/kgish" target="_blank"><img src="/images/github.png" title="Github"/></a></li>
                    <li><a href="http://twitter.com/kiffin" target="_blank"><img src="/images/twitter.png" title="Twitter"/></a></li>
                    <li><a href="http://www.facebook.com/kiffin.gish" target="_blank"><img src="/images/facebook.png" title="Facebook"/></a></li>
                    <li><a href="http://www.google.com/+KiffinGish" target="_blank"><img src="/images/googleplus.png" title="Google+"/></a></li>
                </ul>
            </div>
        </div>
    </script>

    <script type="text/x-handlebars" data-template-name="index">
        <h2 class="page-header">Welcome!</h2>
        {{#if isAuthenticated}}
            <p>To get started just click on one of the navigation links above.</p>
        {{else}}
            <p>Sorry, in order to continue you will either have to {{#link-to 'sessions.index'}}login{{/link-to}} or {{#link-to 'users.signup'}}register{{/link-to}}.</p>
        {{/if}}
    </script>

    <script type="text/x-handlebars" data-template-name="about">
        <h2 class="page-header">About</h2>
        <p>This is a simple web client template based on the <a href="http://www.emberjs.com">ember framework</a> that communicates with a <a href="https://github.com/kgish/ruby-webmachine-roar-template">HAL/JSON web service</a>.</p>
        <p>For more information, please have a look <a href="https://github.com/kgish/ember-hal-template">here</a>.</p>
    </script>

    <script type="text/x-handlebars" data-template-name="loading">
        <h2 class="page-header">Loading</h2>
        <p>Loading, please wait ...</p>
    </script>

    <script type="text/x-handlebars" data-template-name="error">
        <h2 class="page-header">Error</h2>
        <p>Oops, looks like something went wrong.</p>
    </script>

    <script type="text/x-handlebars" data-template-name="secret">
        <h2 class="page-header">Users</h2>
        {{#if isAdmin}}
            <table class="table">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>User</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Login</th>
                        <th>Token</th>
                        <th>Admin</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each model}}
                        <tr>
                            <td>{{id}}</td>
                            <td>{{#link-to 'users.user' this}}{{username}}{{/link-to}}</td>
                            <td>{{name}}</td>
                            <td>{{email}}</td>
                            <td>{{fromnow login_date}}</td>
                            <td>{{truncate access_token}}</td>
                            <td>{{is_admin}}</td>
                        </tr>
                    {{/each}}
                </tbody>
            </table>
        {{else}}
        <p>Oops, you are not allowed to be here.</p>
        {{/if}}

    </script>

    <script type="text/x-handlebars" data-template-name="sessions">
        <h2 class="page-header">Login</h2>
        <p>Please enter your username and password.</p>
        <div class="jumbotron">
            <form class="form-horizontal" {{action "loginUser" on="submit"}}>
                <div class="form-group">
                    {{input value=username_or_email type="text" class="form-control" id="username_or_email" placeholder="Username or email"}}
                </div>
                <div class="form-group">
                    {{input value=password type="password" class="form-control" id="password" placeholder="Password"}}
                </div>
                <button type="submit" class="btn btn-primary btn-sm">Login</button>
            </form>
        </div>
    </script>

    <script type="text/x-handlebars" data-template-name="users/user">
        <h2 class="page-header">Profile</h2>
        <form class="form-horizontal" {{action "editProfile" on="submit"}}>
            <table class="table">
                <thead>
                    <tr>
                        {{#if isAdmin}}
                            <th></th>
                        {{/if}}
                        <th></th><th></th><th></th><th></th>
                        {{#if isAdmin}}
                            <th></th><th></th>
                        {{/if}}
                    </tr>
                </thead>
                <tbody>
                    {{#if isAdmin}}
                        <tr><td>Id</td><td>{{id}}</td></tr>
                    {{/if}}
                    <tr><td>User</td><td>{{username}}</td></tr>
                    <tr><td>Name</td><td>{{name}}</td></tr>
                    <tr><td>Email</td><td>{{email}}</td></tr>
                    <tr><td>Login</td><td>{{fromnow login_date}}</td></tr>
                    {{#if isAdmin}}
                        <tr><td>Token</td><td>{{access_token}}</td></tr>
                        <tr><td>Admin</td><td>{{is_admin}}</td></tr>
                    {{/if}}
                </tbody>
            </table>
            <button type="submit" class="btn btn-primary btn-sm">Edit</button>
        </form>
    </script>


    <script type="text/x-handlebars" data-template-name="users/signup">
        <h2 class="page-header">Signup</h2>
        <p>You too can signup for this pretty amazing service.</p>
        <div class="jumbotron">
            <form class="form-horizontal" {{action "signupUser" on="submit"}}>
                <div class="form-group">
                    {{input type="text" value=fullName class="form-control" id="fullName" placeholder="Full name"}}
                </div>
                <div class="form-group">
                    {{input type="text" value=username class="form-control" id="username" placeholder="Username"}}
                </div>
                <div class="form-group">
                    {{input type="email" value=email class="form-control" id="email" placeholder="Email"}}
                </div>
                <div class="form-group">
                    {{input type="password" value=password class="form-control" id="password" placeholder="Password"}}
                </div>
                <div class="form-group">
                    {{input type="password" value=password_confirmation class="form-control" id="password_confirmation" placeholder="Repeat your password"}}
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary btn-sm">Sign up</button>
                </div>
            </form>
        </div>
    </script>

    <script type="text/x-handlebars" data-template-name="help">
        <h2 class="page-header">Help</h2>
        ï¿¼

        <p>You can {{#link-to 'sessions.index'}}login{{/link-to}} by using one of the following two demo accounts:</p>
        <ul>
            <li>kiffin/pindakaas (admin)</li>
            <li>henri/escargot (user)</li>
        </ul>
        <p>Depending on whether you are an admin or regular user you will be given access accordingly.</p>
    </script>

    <script type="text/x-handlebars" data-template-name="products">
        <h2 class="page-header">Products</h2>
        <div class="row">
            <div class="col-md-6">
                <h2>{{length}} {{pluralize length single='products'}}</h2>
                <div class="list-group">
                    {{#if isAdmin}}
                        <div class="list-group-item">
                            <button type="button" class="btn btn-primary btn-sm" title="Create a new product" {{action "createProduct"}}>
                                <span class="glyphicon glyphicon-plus"></span> Create
                            </button>
                        </div>
                    {{/if}}
                    {{#each}}
                        {{#link-to 'product' this class="list-group-item"}}
                            <span {{bind-attr title=category}} {{bind-attr class=":glyphicon glyphicon"}}></span> {{formatvalue name}} <span class="badge">{{formatvalue price placeholder='?'}}</span>
                        {{/link-to}}
                    {{else}}
                        <li class="list-group-item">No products</li>
                    {{/each}}
                </div>
             </div>
            {{outlet}}
        </div>
    </script>

    <script type="text/x-handlebars" data-template-name="product/index">
        <div class="col-md-6">
            <h2>{{formatvalue name}}</h2>
            <div class="list-group">
                {{#if isAdmin}}
                    <div class="list-group-item">
                        <button type="button" class="btn btn-primary btn-sm" title="Edit this product" {{action "editProduct" this}}>
                            <span class="glyphicon glyphicon-edit"></span> Edit
                        </button>
                        <button type="button" class="btn btn-primary btn-sm" title="Delete this product" {{action "deleteProduct" this}}>
                            <span class="glyphicon glyphicon-remove"></span> Delete
                        </button>
                    </div>
                {{/if}}
                {{partial 'product/form'}}
            </div>
        </div>
    </script>

    <script type="text/x-handlebars" data-template-name="product/edit">
        <div class="col-md-6">
            <h2>Edit -- {{formatvalue name}}</h2>
            <div class="list-group">
                {{partial 'product/form' isEditing=isEditing}}
                <li class="list-group-item">
                    <button type="button" class="btn btn-primary btn-sm" title="Save changes to this product" {{action 'saveEditProduct' this}}>
                        <span class="glyphicon glyphicon-ok"></span> Save
                    </button>
                    <button type="button" class="btn btn-primary btn-sm" title="Cancel changes to this product" {{action 'cancelEditProduct' this}}>
                        <span class="glyphicon glyphicon-remove"></span> Cancel
                    </button>
                </li>
            </div>
        </div>
    </script>

    <script type="text/x-handlebars" data-template-name="products/new">
        <div class="col-md-6">
            <h2>Create -- {{name}}</h2>
            <div class="list-group">
                {{partial 'product/form' isEditing=isEditing this=controller.newProduct}}
                <li class="list-group-item">
                    <button type="button" class="btn btn-primary btn-sm" title="Create new product" {{action 'saveNewProduct'}}>
                    <span class="glyphicon glyphicon-ok"></span> Create
                    </button>
                    <button type="button" class="btn btn-primary btn-sm" title="Cancel new product" {{action 'cancelNewProduct'}}>
                    <span class="glyphicon glyphicon-remove"></span> Cancel
                    </button>
                </li>
            </div>
        </div>
    </script>

    <script type="text/x-handlebars" data-template-name="product/_form">
        {{#if id}}
            <li class="list-group-item">
                <div class="row">
                    <div class="col-md-5">Id</div>
                    <div class="col-md-5">{{id}}</div>
                </div>
            </li>
        {{/if}}
        {{#if isEditing}}
            <li class="list-group-item">
                <div class="row">
                    <div class="col-md-5">Name</div>
                    <div class="col-md-5">{{input class="form-control" placeholder="Name of product" value=name}}</div>
                </div>
            </li>
        {{/if}}
        <li class="list-group-item">
            <div class="row">
                <div class="col-md-5">Price</div>
                <div class="col-md-5">
                    {{#if isEditing}}
                        {{input class="form-control" placeholder="Price of product" value=price}}
                    {{else}}
                        {{formatvalue price placeholder='?'}}&nbsp; {{pluralize price single='token'}}
                    {{/if}}
                </div>
            </div>
        </li>
        <li class="list-group-item">
            <div class="row">
                <div class="col-md-5">Category</div>
                <div class="col-md-5">
                    {{#if isEditing}}
                        {{input class="form-control" placeholder="Category of product" value=category}}
                    {{else}}
                        {{formatvalue category}}
                    {{/if}}
                </div>
            </div>
        </li>
    </script>

</head>
<body>

</body>
</html>
